<%- include('../partials/header', { pageTitle: 'Flight List' }) %>

<table>
  <thead>
    <tr>
      <th>Airline</th>
      <th>Airport</th>
      <th>Flight Number</th>
      <th>Departs</th>
      <th>Arrival</th>
      <th>Details</th>
    </tr>
  </thead>
  <tbody>
    <% flights.forEach(function(f) { %>
      <% const todaysDate = new Date() %>
      <tr class="<% todaysDate < f.departs ? 'red' : '' %>">
        <td><%= f.airline %> </td>
        <td><%= f.airport %></td>
        <td><%= f.flightNo %></td>
        <td><%= f.departs %></td>
        <td>
          <% f.destinations.forEach(function(destination) { %>
            <p>Airport: <%= destination.airport %>, Arrival: <%= destination.arrival %></p>
          <% }) %>
        </td>
        <td>
          <form action="/flights/<%= f._id %>" method="get">
            <button type="submit">Show</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('../partials/footer') %>